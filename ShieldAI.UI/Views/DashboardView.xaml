<UserControl x:Class="ShieldAI.UI.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel>
            <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
            <TextBlock Text="Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©" Style="{StaticResource HeaderStyle}" Margin="0,0,0,24"/>
            
            <!-- Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
            <UniformGrid Columns="4" Margin="0,0,0,24">
                <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ù…Ø§ÙŠØ© -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,12,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ›¡ï¸" FontSize="32"/>
                        <TextBlock Text="{Binding ProtectionStatus}" 
                                   Style="{StaticResource SubHeaderStyle}"
                                   Foreground="{Binding ProtectionStatusColor}"
                                   Margin="0,8,0,0"/>
                        <TextBlock Text="Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ù…Ø§ÙŠØ©" 
                                   Style="{StaticResource BodyStyle}"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙØ­ÙˆØµØ© -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,12,0">
                    <StackPanel>
                        <TextBlock Text="ðŸ“„" FontSize="32"/>
                        <TextBlock Text="{Binding TotalFilesScanned}" 
                                   Style="{StaticResource SubHeaderStyle}"
                                   Margin="0,8,0,0"/>
                        <TextBlock Text="Ù…Ù„Ù ØªÙ… ÙØ­ØµÙ‡" 
                                   Style="{StaticResource BodyStyle}"
                                   Margin="0,4,0,0"/>
                        <Button Content="ðŸ” Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙØ§Øª"
                                Style="{StaticResource ModernButtonStyle}"
                                Command="{Binding ViewScannedFilesCommand}"
                                Margin="0,12,0,0"
                                FontSize="12"
                                Padding="8,4"/>
                    </StackPanel>
                </Border>
                
                <!-- Ø§Ù„ØªÙ‡Ø¯ÙŠØ¯Ø§Øª Ø§Ù„Ù…ÙƒØªØ´ÙØ© -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,12,0">
                    <StackPanel>
                        <TextBlock Text="âš ï¸" FontSize="32"/>
                        <TextBlock Text="{Binding TotalThreatsDetected}" 
                                   Style="{StaticResource SubHeaderStyle}"
                                   Foreground="{StaticResource DangerBrush}"
                                   Margin="0,8,0,0"/>
                        <TextBlock Text="ØªÙ‡Ø¯ÙŠØ¯ Ù…ÙƒØªØ´Ù" 
                                   Style="{StaticResource BodyStyle}"
                                   Margin="0,4,0,0"/>
                        <Button Content="ðŸ” Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„ÙØ§Øª"
                                Style="{StaticResource DangerButtonStyle}"
                                Command="{Binding ViewThreatsCommand}"
                                Margin="0,12,0,0"
                                FontSize="12"
                                Padding="8,4"/>
                    </StackPanel>
                </Border>
                
                <!-- Ø§Ù„Ø­Ø¬Ø± Ø§Ù„ØµØ­ÙŠ -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="ðŸ”’" FontSize="32"/>
                        <TextBlock Text="{Binding QuarantineCount}" 
                                   Style="{StaticResource SubHeaderStyle}"
                                   Foreground="{StaticResource WarningBrush}"
                                   Margin="0,8,0,0"/>
                        <TextBlock Text="Ù…Ù„Ù ÙÙŠ Ø§Ù„Ø­Ø¬Ø±" 
                                   Style="{StaticResource BodyStyle}"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </UniformGrid>
            
            <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙØ­Øµ Ø§Ù„Ø³Ø±ÙŠØ¹ -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="Ø§Ù„ÙØ­Øµ Ø§Ù„Ø³Ø±ÙŠØ¹" Style="{StaticResource SubHeaderStyle}" Margin="0,0,0,16"/>
                    <StackPanel Orientation="Horizontal">
                        <Button Content="ðŸ” ÙØ­Øµ Ø³Ø±ÙŠØ¹" 
                                Style="{StaticResource ModernButtonStyle}"
                                Command="{Binding QuickScanCommand}"
                                IsEnabled="{Binding IsScanning, Converter={StaticResource InverseBoolToVisibilityConverter}}"
                                Margin="0,0,12,0"/>
                        <Button Content="ðŸ–¥ï¸ ÙØ­Øµ ÙƒØ§Ù…Ù„" 
                                Style="{StaticResource ModernButtonStyle}"
                                Command="{Binding FullScanCommand}"
                                IsEnabled="{Binding IsScanning, Converter={StaticResource InverseBoolToVisibilityConverter}}"
                                Margin="0,0,12,0"/>
                        <Button Content="âš™ï¸ ÙØ­Øµ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª" 
                                Style="{StaticResource ModernButtonStyle}"
                                Command="{Binding ScanProcessesCommand}"
                                IsEnabled="{Binding IsScanning, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- Ø¢Ø®Ø± Ø§Ù„ØªÙ‡Ø¯ÙŠØ¯Ø§Øª -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="Ø¢Ø®Ø± Ø§Ù„ØªÙ‡Ø¯ÙŠØ¯Ø§Øª Ø§Ù„Ù…ÙƒØªØ´ÙØ©" Style="{StaticResource SubHeaderStyle}" Margin="0,0,0,16"/>
                    <ItemsControl ItemsSource="{Binding RecentThreats}" MaxHeight="200">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="{StaticResource BackgroundHoverBrush}" 
                                        CornerRadius="8" 
                                        Padding="12"
                                        Margin="0,0,0,8">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <Ellipse Grid.Column="0" Width="40" Height="40" 
                                                 Fill="{StaticResource DangerBrush}"
                                                 Margin="0,0,12,0"/>
                                        <TextBlock Grid.Column="0" Text="âš ï¸" 
                                                   FontSize="20" 
                                                   VerticalAlignment="Center"
                                                   HorizontalAlignment="Center"
                                                   Margin="0,0,12,0"/>
                                        
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding ScanResult.Threat.Name}" 
                                                       Foreground="{StaticResource TextPrimaryBrush}"
                                                       FontWeight="SemiBold"/>
                                            <TextBlock Text="{Binding FilePath}" 
                                                       Style="{StaticResource BodyStyle}"
                                                       TextTrimming="CharacterEllipsis"/>
                                        </StackPanel>
                                        
                                        <TextBlock Grid.Column="2" 
                                                   Text="{Binding DetectionTime, StringFormat='{}{0:HH:mm}'}" 
                                                   Style="{StaticResource BodyStyle}"
                                                   VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    
                    <TextBlock Text="Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‡Ø¯ÙŠØ¯Ø§Øª Ù…ÙƒØªØ´ÙØ©"
                               Style="{StaticResource BodyStyle}"
                               HorizontalAlignment="Center"
                               Visibility="{Binding RecentThreats.Count, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
